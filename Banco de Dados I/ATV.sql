-- Criar banco
CREATE DATABASE SISTEMA_VENDAS;

-- Usar o banco
USE SISTEMA_VENDAS;

-- Tabela MUNICIPIOS
CREATE TABLE MUNICIPIOS (
    MUN_CODIGO INT(4) NOT NULL PRIMARY KEY,
    MUN_NOME VARCHAR(100) NOT NULL,
    MUN_UF_ESTADO CHAR(2) NOT NULL,
    MUN_CEP VARCHAR(8) NULL
);

-- Tabela TIPO_MENSAGENS
CREATE TABLE TIPO_MENSAGENS (
    TMS_CODIGO INT(3) NOT NULL PRIMARY KEY,
    TMS_DESCRICAO VARCHAR(50) NOT NULL
);

-- Tabela ATENDENTES
CREATE TABLE ATENDENTES (
    ATE_CODIGO INT(5) NOT NULL PRIMARY KEY,
    ATE_NOME VARCHAR(50) NOT NULL,
    ATE_ULTIMO_ACESSO DATE NOT NULL,
    ATE_RAMAL VARCHAR(4) NULL,
    ATE_EMAIL VARCHAR(50) NULL,
    ATE_PERFIL CHAR(1) NOT NULL,
    ATE_STATUS CHAR(1) NULL
);

-- Tabela BANCOS
CREATE TABLE BANCOS (
    BAN_CODIGO INT(3) NOT NULL PRIMARY KEY,
    BAN_NOME VARCHAR(50) NOT NULL
);

-- Tabela CLIENTES
CREATE TABLE CLIENTES (
    CLI_CODIGO INT(5) NOT NULL PRIMARY KEY,
    CLI_MUN_CODIGO INT(4) NOT NULL,
    CLI_NOME VARCHAR(50) NOT NULL,
    CLI_DATA_NASCIMENTO DATE NOT NULL,
    CLI_SEXO CHAR(1) NULL,
    CLI_CPF VARCHAR(11) NULL,
    CLI_RG VARCHAR(20) NULL,
    CLI_CNPJ VARCHAR(14) NULL,
    CLI_ENDERECO VARCHAR(100) NULL,
    CLI_EMAIL VARCHAR(50) NULL,
    CLI_DATA_CADASTRO DATE NOT NULL,
    CLI_TIPO CHAR(1) NOT NULL,
    CLI_STATUS CHAR(1) NULL,
    CLI_FONE VARCHAR(20) NULL,
    CLI_NOME_CONTATO VARCHAR(50) NULL,
    FOREIGN KEY (CLI_MUN_CODIGO) REFERENCES MUNICIPIOS(MUN_CODIGO)
);

-- Tabela FORNECEDORES
CREATE TABLE FORNECEDORES (
    FOR_CODIGO INT(5) NOT NULL PRIMARY KEY,
    FOR_MUN_CODIGO INT(4) NOT NULL,
    FOR_RAZAO_SOCIAL VARCHAR(100) NOT NULL,
    FOR_NOME_FANTASIA VARCHAR(50) NOT NULL,
    FOR_NOME_CONTATO VARCHAR(50) NOT NULL,
    FOR_CNPJ VARCHAR(14) NOT NULL,
    FOR_ENDERECO VARCHAR(100) NULL,
    FOR_DATA_CADASTRO DATE NULL,
    FOR_FONE VARCHAR(20) NULL,
    FOR_EMAIL VARCHAR(50) NULL,
    FOR_WEBSITE VARCHAR(100) NULL,
    FOREIGN KEY (FOR_MUN_CODIGO) REFERENCES MUNICIPIOS(MUN_CODIGO)
);

-- Tabela CATEGORIAS_PRODUTOS
CREATE TABLE CATEGORIAS_PRODUTOS (
    CAT_CODIGO INT(3) NOT NULL PRIMARY KEY,
    CAT_IDENTIFICADOR VARCHAR(4) NULL,
    CAT_DESCRICAO VARCHAR(100) NOT NULL
);

-- Tabela PRODUTOS
CREATE TABLE PRODUTOS (
    PRO_CODIGO INT(5) NOT NULL PRIMARY KEY,
    PRO_FOR_CODIGO INT(5) NOT NULL,
    PRO_CAT_CODIGO INT(3) NOT NULL,
    PRO_DESCRICAO VARCHAR(100) NOT NULL,
    PRO_QNT_DISPONIVEL INT(5) NULL,
    PRO_ULTIMA_AQUISICAO DATE NULL,
    PRO_VALOR_UNIT FLOAT NULL,
    PRO_FABRICANTE VARCHAR(50) NULL,
    PRO_DETALHES TEXT NULL,
    FOREIGN KEY (PRO_FOR_CODIGO) REFERENCES FORNECEDORES(FOR_CODIGO),
    FOREIGN KEY (PRO_CAT_CODIGO) REFERENCES CATEGORIAS_PRODUTOS(CAT_CODIGO)
);

-- Tabela VENDAS
CREATE TABLE VENDAS (
    VEN_CODIGO INT(5) NOT NULL PRIMARY KEY,
    VEN_CLI_CODIGO INT(5) NOT NULL,
    VEN_ATE_CODIGO INT(3) NOT NULL,
    VEN_BAN_CODIGO INT(3) NOT NULL,
    VEN_VALOR_TOTAL FLOAT NOT NULL,
    VEN_FORMA_PAGAMENTO CHAR(1) NULL,
    VEN_OBSERVACOES VARCHAR(200) NULL,
    FOREIGN KEY (VEN_CLI_CODIGO) REFERENCES CLIENTES(CLI_CODIGO),
    FOREIGN KEY (VEN_ATE_CODIGO) REFERENCES ATENDENTES(ATE_CODIGO),
    FOREIGN KEY (VEN_BAN_CODIGO) REFERENCES BANCOS(BAN_CODIGO)
);

-- Tabela HIST_VENDAS
CREATE TABLE HIST_VENDAS (
    HVE_VEN_CODIGO INT(5) NOT NULL,
    HVE_PRO_CODIGO INT(5) NOT NULL,
    HVE_DATA_VENDA DATE NOT NULL,
    HVE_DATA_RECEBIMENTO DATE NULL,
    HVE_QNT_ITENS INT(5) NULL,
    PRIMARY KEY (HVE_VEN_CODIGO, HVE_PRO_CODIGO),
    FOREIGN KEY (HVE_VEN_CODIGO) REFERENCES VENDAS(VEN_CODIGO),
    FOREIGN KEY (HVE_PRO_CODIGO) REFERENCES PRODUTOS(PRO_CODIGO)
);

-- Tabela MENSAGENS
CREATE TABLE MENSAGENS (
    MEN_CODIGO INT(5) NOT NULL PRIMARY KEY,
    MEN_ATE_CODIGO INT(3) NOT NULL,
    MEN_TMS_CODIGO INT(3) NOT NULL,
    MEN_TEXTO TEXT NOT NULL,
    MEN_DATA_ENVIO DATE NULL,
    FOREIGN KEY (MEN_ATE_CODIGO) REFERENCES ATENDENTES(ATE_CODIGO),
    FOREIGN KEY (MEN_TMS_CODIGO) REFERENCES TIPO_MENSAGENS(TMS_CODIGO)
);

-- Inserções na tabela MUNICIPIOS
INSERT INTO MUNICIPIOS (MUN_CODIGO, MUN_NOME, MUN_UF_ESTADO, MUN_CEP)
VALUES
(101, 'São Paulo', 'SP', '01000000'),
(102, 'Rio de Janeiro', 'RJ', '20000000'),
(103, 'Belo Horizonte', 'MG', '30000000'),
(104, 'Porto Alegre', 'RS', '90000000'),
(105, 'Salvador', 'BA', '40000000');


-- Inserções na tabela TIPO_MENSAGENS
INSERT INTO TIPO_MENSAGENS (TMS_CODIGO, TMS_DESCRICAO)
VALUES
(1, 'Boas-vindas'),
(2, 'Dúvida'),
(3, 'Sugestão'),
(4, 'Reclamação'),
(5, 'Agradecimento');

-- Inserções na tabela CATEGORIAS_PRODUTOS
INSERT INTO CATEGORIAS_PRODUTOS (CAT_CODIGO, CAT_IDENTIFICADOR, CAT_DESCRICAO)
VALUES
(1, 'ELE', 'Eletrônicos'),
(2, 'INF', 'Informática'),
(3, 'ESC', 'Material Escolar'),
(4, 'LIV', 'Livros'),
(5, 'CDS', 'CDs e DVDs');



-- Inserções na tabela CLIENTES
INSERT INTO CLIENTES (CLI_CODIGO, CLI_MUN_CODIGO, CLI_NOME, CLI_DATA_NASCIMENTO, CLI_SEXO, CLI_CPF, CLI_RG, CLI_CNPJ, CLI_ENDERECO, CLI_EMAIL, CLI_DATA_CADASTRO, CLI_TIPO, CLI_STATUS, CLI_FONE, CLI_NOME_CONTATO)
VALUES 
(1, 101, 'João Silva', '1985-07-15', 'M', '12345678901', 'MG123456', NULL, 'Rua A, 123', 'joao.silva@email.com', '2024-09-24', 'F', 'A', '31987654321', 'Maria'),
(2, 102, 'Maria Souza', '1990-03-22', 'F', '98765432100', 'SP654321', NULL, 'Av. B, 456', 'maria.souza@email.com', '2024-09-24', 'J', 'A', '21987654322', 'José'),
(3, 103, 'Pedro Oliveira', '1978-12-10', 'M', NULL, NULL, '11223344000101', 'Rua C, 789', 'pedro.oliveira@email.com', '2024-09-24', 'F', 'I', '31987654323', NULL),
(4, 104, 'Ana Lima', '2000-05-30', 'F', '23456789012', 'RJ234567', NULL, 'Rua D, 101', 'ana.lima@email.com', '2024-09-24', 'F', 'A', '31987654324', NULL),
(5, 105, 'Carlos Mendes', '1982-11-07', 'M', '34567890123', 'SP345678', NULL, 'Rua E, 202', 'carlos.mendes@email.com', '2024-09-24', 'J', 'I', '11987654325', 'Fernanda');


-- Inserções na tabela ATENDENTES
INSERT INTO ATENDENTES (ATE_CODIGO, ATE_NOME, ATE_ULTIMO_ACESSO, ATE_RAMAL, ATE_EMAIL, ATE_PERFIL, ATE_STATUS)
VALUES
(1, 'João Silva', '2024-09-20', '1001', 'joao.silva@empresa.com', 'A', 'A'),
(2, 'Maria Souza', '2024-09-21', '1002', 'maria.souza@empresa.com', 'B', 'A'),
(3, 'Pedro Oliveira', '2024-09-22', '1003', 'pedro.oliveira@empresa.com', 'C', 'I'),
(4, 'Ana Lima', '2024-09-23', '1004', 'ana.lima@empresa.com', 'A', 'A'),
(5, 'Carlos Mendes', '2024-09-24', '1005', 'carlos.mendes@empresa.com', 'B', 'A');


-- Inserções na tabela FORNECEDORES
INSERT INTO FORNECEDORES (FOR_CODIGO, FOR_MUN_CODIGO, FOR_RAZAO_SOCIAL, FOR_NOME_FANTASIA, FOR_NOME_CONTATO, FOR_CNPJ, FOR_ENDERECO, FOR_DATA_CADASTRO, FOR_FONE, FOR_EMAIL, FOR_WEBSITE)
VALUES
(1, 101, 'Fornecedor A Ltda', 'Fornecedor A', 'João Silva', '12345678000199', 'Rua X, 123', '2024-09-24', '31987654321', 'contato@fornecedora.com', 'www.fornecedora.com'),
(2, 102, 'Fornecedor B Ltda', 'Fornecedor B', 'Maria Souza', '98765432000199', 'Av. Y, 456', '2024-09-24', '21987654322', 'contato@fornecedorb.com', 'www.fornecedorb.com'),
(3, 103, 'Fornecedor C ME', 'Fornecedor C', 'Pedro Oliveira', '11223344000199', 'Rua Z, 789', '2024-09-24', '31987654323', 'contato@fornecedorc.com', 'www.fornecedorc.com'),
(4, 104, 'Fornecedor D S/A', 'Fornecedor D', 'Ana Lima', '23456789000199', 'Rua W, 101', '2024-09-24', '31987654324', 'contato@fornecedord.com', 'www.fornecedord.com'),
(5, 105, 'Fornecedor E Ltda', 'Fornecedor E', 'Carlos Mendes', '34567890000199', 'Rua V, 202', '2024-09-24', '11987654325', 'contato@fornecedore.com', 'www.fornecedore.com');

-- Inserções na tabela PRODUTOS
INSERT INTO PRODUTOS (PRO_CODIGO, PRO_FOR_CODIGO, PRO_CAT_CODIGO, PRO_DESCRICAO, PRO_QNT_DISPONIVEL, PRO_ULTIMA_AQUISICAO, PRO_VALOR_UNIT, PRO_FABRICANTE, PRO_DETALHES)
VALUES
(1, 1, 1, 'Produto A', 100, '2024-08-01', 10.50, 'Fabricante A', 'Produto de alta qualidade'),
(2, 2, 2, 'Produto B', 200, '2024-08-05', 20.75, 'Fabricante B', 'Produto confiável e durável'),
(3, 3, 1, 'Produto C', 150, '2024-08-10', 15.00, 'Fabricante C', 'Produto de última geração'),
(4, 4, 3, 'Produto D', 50, '2024-08-12', 25.00, 'Fabricante D', 'Produto premium com garantia'),
(5, 5, 2, 'Produto E', 75, '2024-08-15', 12.50, 'Fabricante E', 'Produto econômico e eficiente');


-- Inserções na tabela BANCOS
INSERT INTO BANCOS (BAN_CODIGO, BAN_NOME)
VALUES
(1, 'Banco do Brasil'),
(2, 'Caixa Econômica Federal'),
(3, 'Bradesco'),
(4, 'Santander'),
(5, 'Itaú');

-- Inserções na tabela VENDAS
INSERT INTO VENDAS (VEN_CODIGO, VEN_CLI_CODIGO, VEN_ATE_CODIGO, VEN_BAN_CODIGO, VEN_VALOR_TOTAL, VEN_FORMA_PAGAMENTO, VEN_OBSERVACOES)
VALUES
(1, 1, 1, 1, 100.50, 'C', 'Compra online via cartão de crédito'),
(2, 2, 2, 2, 200.75, 'D', 'Compra com pagamento à vista em dinheiro'),
(3, 3, 3, 3, 150.00, 'B', 'Compra parcelada em 3x no boleto'),
(4, 4, 4, 1, 250.00, 'C', 'Compra online via cartão de débito'),
(5, 5, 5, 2, 120.50, 'D', 'Compra realizada na loja física com dinheiro');

-- Inserções na tabela HIST_VENDAS
INSERT INTO HIST_VENDAS (HVE_VEN_CODIGO, HVE_PRO_CODIGO, HVE_DATA_VENDA, HVE_DATA_RECEBIMENTO, HVE_QNT_ITENS)
VALUES
(1, 1, '2024-09-01', '2024-09-05', 2),
(2, 2, '2024-09-02', '2024-09-06', 1),
(3, 3, '2024-09-03', '2024-09-07', 3),
(4, 4, '2024-09-04', '2024-09-08', 1),
(5, 5, '2024-09-05', '2024-09-09', 4);


-- Inserções na tabela MENSAGENS
INSERT INTO MENSAGENS (MEN_CODIGO, MEN_ATE_CODIGO, MEN_TMS_CODIGO, MEN_TEXTO, MEN_DATA_ENVIO)
VALUES
(1, 1, 1, 'Mensagem de boas-vindas ao sistema', '2024-09-24'),
(2, 2, 2, 'Dúvida sobre procedimento de venda', '2024-09-23'),
(3, 3, 3, 'Sugestão de melhoria no sistema', '2024-09-22'),
(4, 4, 4, 'Reclamação sobre atraso na entrega', '2024-09-21'),
(5, 5, 1, 'Agradecimento por suporte técnico', '2024-09-20');


SHOW TABLES;
DESC ATENDENTES;
SELECT COUNT(*) FROM CATEGORIAS_PRODUTOS;
SELECT ATE_NOME, ATE_EMAIL FROM ATENDENTES;
SELECT * FROM ATENDENTES WHERE ATE_STATUS = 'A';
UPDATE MENSAGENS SET MEN_TEXTO = 'OI' WHERE MEN_CODIGO = 1;
SELECT MEN_TEXTO FROM MENSAGENS;
UPDATE MENSAGENS SET MEN_TEXTO ='AA' WHERE MEN_TMS_CODIGO = 1;
SELECT * FROM MENSAGENS;
DELETE FROM MENSAGENS WHERE MEN_CODIGO = 1;
SELECT MEN_TEXTO FROM MENSAGENS;
